<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- @author fernando.mendioroz@telestax.com (Fernando Mendioroz) -->
<mapper namespace="org.mobicents.servlet.sip.restcomm.dao.GeolocationDao">
	<insert id="addGeolocation" parameterType="map">
		INSERT INTO "restcomm_geolocation" ("sid", ""date_created", "date_updated", "date_executed", "account_sid,
		source", "device_identifier", "global_cell_id", "location_area_id", "age_of_location_info", "mobile_country_code", "
		mobile_network_code", "network_entity_address", "device_latitude", "device_longitude", "physical_address", "internet_address,
		radius", "interval", "occurrence", "geo_location_type", "geo_location_response_time", "status", "api_version", "uri)
		VALUES(#{sid}, #{date_created}, #{date_updated}, #{date_executed}, #{account_sid}, #{source}, #{device_identifier}, 
		#{global_cell_id}, #{location_area_id},	#{age_of_location_info}, #{mobile_country_code}, #{mobile_network_code},
		#{network_entity_address}, #{device_latitude}, #{device_longitude}, #{physical_address}, #{internet_address},
		#{radius}, #{interval}, #{occurrence}, #{geo_location_type}, #{geo_location_response_time}, #{status}, #{api_version},	
		#{uri});
	</insert> 

	<select id="getGeolocation" parameterType="string" resultType="hashmap">
		SELECT * FROM "restcomm_geolocation" WHERE "sid"=#{sid};
	</select>

	<select id="getGeolocations" parameterType="string" resultType="hashmap">
		SELECT * FROM "restcomm_geolocation" WHERE account_"sid"=#{account_sid};
	</select>

	<delete id="removeGeolocation" parameterType="string">
		DELETE FROM "restcomm_geolocation" WHERE "sid"=#{sid};
	</delete>

	<update id="updateGeolocation" parameterType="map">
		UPDATE "restcomm_geolocation" SET "date_updated"=#{date_updated}, "global_cell_id"=#{global_cell_id}, "location_area_id"=#{location_area_id},
		"age_of_location_info"=#{age_of_location_info}, "mobile_country_code"=#{mobile_country_code], "mobile_network_code"=#{mobile_network_code},
		"network_entity_address"=#{network_entity_address}, "device_latitude"=#{device_latitude}, "device_longitude"=#{device_longitude},
		"physical_address"=#{physical_address}, "internet_address"=#{internet_address}, "radius"=#{radius}, "interval"=#{interval}, 
		"occurrence"=#{occurrence}, "geo_location_response_time"=#{geo_location_response_time}, "status"=#{status}
		WHERE sid=#{sid};
	</update>
</mapper>